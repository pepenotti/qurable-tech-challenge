<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="1171px" preserveAspectRatio="none" style="width:1328px;height:1171px;background:#FEFEFE;" version="1.1" viewBox="0 0 1328 1171" width="1328px" zoomAndPan="magnify"><title>Coupon Book Service - Database Schema</title><defs/><g><rect fill="#FEFEFE" height="1171" style="stroke:none;stroke-width:1;" width="1328" x="0" y="0"/><g class="title" data-source-line="8"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="295.6885" x="509.3708" y="23.5352">Coupon Book Service - Database Schema</text></g><!--class Users--><g class="entity" data-entity="Users" data-source-line="10" data-uid="ent0002" id="entity_Users"><rect fill="#F1F1F1" height="179.9063" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207.6104" x="595.84" y="44.4883"/><ellipse cx="676.6442" cy="60.4883" fill="#FFAAAA" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M677.986,67.7383 L675.5373,67.7383 L675.5373,57.4868 L672.3913,57.4868 L672.3913,55.3452 L681.132,55.3452 L681.132,57.4868 L677.986,57.4868 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.502" x="697.1442" y="65.7793">Users</text><line style="stroke:#181818;stroke-width:0.5;" x1="596.84" x2="802.4504" y1="76.4883" y2="76.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="52.5068" x="601.84" y="94.0234">user_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="654.3468" y="94.0234">: VARCHAR</text><line style="stroke:#181818;stroke-width:1;" x1="596.84" x2="802.4504" y1="100.9766" y2="100.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.3008" x="601.84" y="118.5117">name: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177.4814" x="601.84" y="135">email: VARCHAR (UNIQUE)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195.6104" x="601.84" y="151.4883">hashed_password: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164.3906" x="601.84" y="167.9766">role: ENUM(admin, user)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.1338" x="601.84" y="184.4648">is_active: BOOLEAN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.4863" x="601.84" y="200.9531">created_at: TIMESTAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.0986" x="601.84" y="217.4414">updated_at: TIMESTAMP</text></g><!--class Books--><g class="entity" data-entity="Books" data-source-line="22" data-uid="ent0003" id="entity_Books"><rect fill="#F1F1F1" height="245.8594" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="266.0439" x="177.63" y="301.3983"/><ellipse cx="286.1163" cy="317.3983" fill="#FFAAAA" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M287.4581,324.6483 L285.0094,324.6483 L285.0094,314.3968 L281.8634,314.3968 L281.8634,312.2552 L290.6041,312.2552 L290.6041,314.3968 L287.4581,314.3968 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5713" x="306.6163" y="322.6893">Books</text><line style="stroke:#181818;stroke-width:0.5;" x1="178.63" x2="442.6739" y1="333.3983" y2="333.3983"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="56.8477" x="183.63" y="350.9334">book_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="240.4777" y="350.9334">: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61.4619" x="183.63" y="367.4217">owner_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="245.0919" y="367.4217">: VARCHAR</text><line style="stroke:#181818;stroke-width:1;" x1="178.63" x2="442.6739" y1="374.3748" y2="374.3748"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.3008" x="183.63" y="391.91">name: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151.0879" x="183.63" y="408.3983">description: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.4863" x="183.63" y="424.8866">created_at: TIMESTAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193.0947" x="183.63" y="441.3748">expiration_date: TIMESTAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236.6123" x="183.63" y="457.8631">allow_multi_redemption: BOOLEAN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="254.0439" x="183.63" y="474.3514">max_redemptions_per_user: INTEGER</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253.7158" x="183.63" y="490.8397">max_assignments_per_user: INTEGER</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.625" x="183.63" y="507.328">code_pattern: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.8496" x="183.63" y="523.8163">total_code_count: INTEGER</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.1338" x="183.63" y="540.3045">is_active: BOOLEAN</text></g><!--class Coupons--><g class="entity" data-entity="Coupons" data-source-line="38" data-uid="ent0004" id="entity_Coupons"><rect fill="#F1F1F1" height="212.8828" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.3037" x="158" y="675.9183"/><ellipse cx="225.2964" cy="691.9183" fill="#FFAAAA" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M226.6382,699.1683 L224.1895,699.1683 L224.1895,688.9168 L221.0435,688.9168 L221.0435,686.7752 L229.7842,686.7752 L229.7842,688.9168 L226.6382,688.9168 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.2109" x="245.7964" y="697.2093">Coupons</text><line style="stroke:#181818;stroke-width:0.5;" x1="159" x2="360.3037" y1="707.9183" y2="707.9183"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="33.8721" x="164" y="725.4534">code</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.8213" x="197.8721" y="725.4534">: VARCHAR(50)</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="54.0518" x="164" y="741.9417">book_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="218.0518" y="741.9417">: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="116.293" x="164" y="758.43">assigned_user_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="280.293" y="758.43">: VARCHAR</text><line style="stroke:#181818;stroke-width:1;" x1="159" x2="360.3037" y1="765.3831" y2="765.3831"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.9619" x="164" y="782.9183">state: VARCHAR(20)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190.21" x="164" y="799.4066">redemption_count: INTEGER</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.3506" x="164" y="815.8948">max_redemptions: INTEGER</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.5137" x="164" y="832.3831">is_locked: BOOLEAN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.5586" x="164" y="848.8714">locked_until: TIMESTAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.4863" x="164" y="865.3597">created_at: TIMESTAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.0986" x="164" y="881.848">updated_at: TIMESTAMP</text></g><!--class RedemptionHistory--><g class="entity" data-entity="RedemptionHistory" data-source-line="52" data-uid="ent0005" id="entity_RedemptionHistory"><rect fill="#F1F1F1" height="146.9297" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="210.9668" x="154.16" y="1017.4683"/><ellipse cx="191.1647" cy="1033.4683" fill="#FFAAAA" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M192.5065,1040.7183 L190.0578,1040.7183 L190.0578,1030.4668 L186.9118,1030.4668 L186.9118,1028.3252 L195.6525,1028.3252 L195.6525,1030.4668 L192.5065,1030.4668 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130.0674" x="210.0547" y="1038.7593">RedemptionHistory</text><line style="stroke:#181818;stroke-width:0.5;" x1="155.16" x2="364.1268" y1="1049.4683" y2="1049.4683"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="71.6338" x="160.16" y="1067.0034">history_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.7793" x="231.7938" y="1067.0034">: UUID</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="32.3818" x="160.16" y="1083.4917">code</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="192.5418" y="1083.4917">: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49.2119" x="160.16" y="1099.98">user_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="209.3719" y="1099.98">: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="54.0518" x="160.16" y="1116.4683">book_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="214.2118" y="1116.4683">: VARCHAR</text><line style="stroke:#181818;stroke-width:1;" x1="155.16" x2="364.1268" y1="1123.4214" y2="1123.4214"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174.8291" x="160.16" y="1140.9566">redeemed_at: TIMESTAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="198.9668" x="160.16" y="1157.4448">redemption_metadata: JSONB</text></g><!--class UserPools--><g class="entity" data-entity="UserPools" data-source-line="62" data-uid="ent0006" id="entity_UserPools"><rect fill="#F1F1F1" height="163.418" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175.0986" x="712.1" y="342.6183"/><ellipse cx="762.1562" cy="358.6183" fill="#FFAAAA" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M763.4979,365.8683 L761.0492,365.8683 L761.0492,355.6168 L757.9032,355.6168 L757.9032,353.4752 L766.6439,353.4752 L766.6439,355.6168 L763.4979,355.6168 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.4863" x="782.6562" y="363.9093">UserPools</text><line style="stroke:#181818;stroke-width:0.5;" x1="713.1" x2="886.1986" y1="374.6183" y2="374.6183"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="52.541" x="718.1" y="392.1534">pool_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="770.641" y="392.1534">: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="73.4043" x="718.1" y="408.6417">created_by</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="791.5043" y="408.6417">: VARCHAR</text><line style="stroke:#181818;stroke-width:1;" x1="713.1" x2="886.1986" y1="415.5948" y2="415.5948"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.3008" x="718.1" y="433.13">name: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.9932" x="718.1" y="449.6183">description: TEXT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.1338" x="718.1" y="466.1066">is_active: BOOLEAN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.4863" x="718.1" y="482.5948">created_at: TIMESTAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.0986" x="718.1" y="499.0831">updated_at: TIMESTAMP</text></g><!--class pool_users--><g class="entity" data-entity="pool_users" data-source-line="73" data-uid="ent0007" id="entity_pool_users"><rect fill="#F1F1F1" height="97.4648" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="161.1738" x="960.06" y="733.6283"/><ellipse cx="1000.0917" cy="749.6283" fill="#FFAAAA" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1001.4335,756.8783 L998.9848,756.8783 L998.9848,746.6268 L995.8388,746.6268 L995.8388,744.4852 L1004.5795,744.4852 L1004.5795,746.6268 L1001.4335,746.6268 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.5479" x="1019.6543" y="754.9193">pool_users</text><line style="stroke:#181818;stroke-width:0.5;" x1="961.06" x2="1120.2338" y1="765.6283" y2="765.6283"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="52.541" x="966.06" y="783.1634">pool_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="1018.601" y="783.1634">: VARCHAR</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="52.5068" x="966.06" y="799.6517">user_id</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0107" x="1018.5668" y="799.6517">: VARCHAR</text><line style="stroke:#181818;stroke-width:1;" x1="961.06" x2="1120.2338" y1="806.6048" y2="806.6048"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.1738" x="966.06" y="824.14">added_at: TIMESTAMP</text></g><g class="entity" data-entity="GMN16" data-source-line="91" data-uid="ent0017" id="entity_GMN16"><path d="M838.75,60.5483 L838.75,130.4483 L803.9,134.4483 L838.75,138.4483 L838.75,208.3432 A0,0 0 0 0 838.75,208.3432 L1082.5464,208.3432 A0,0 0 0 0 1082.5464,208.3432 L1082.5464,70.5483 L1072.5464,60.5483 L838.75,60.5483 A0,0 0 0 0 838.75,60.5483" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1072.5464,60.5483 L1072.5464,70.5483 L1082.5464,70.5483 L1072.5464,60.5483" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.1479" x="844.75" y="78.1166">Authentication &amp; Authorization:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.792" x="844.75" y="93.4272">- Passwords hashed with bcrypt</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.1152" x="844.75" y="108.7377">- JWT token-based auth</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.7964" x="844.75" y="124.0483">- Role-based access (ADMIN/USER)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.1685" x="844.75" y="139.3588">- Email uniqueness enforced</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="844.75" y="154.6694">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.1934" x="844.75" y="169.9799">Indexes:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.5728" x="844.75" y="185.2905">- user_id (PK)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.7866" x="844.75" y="200.601">- email (UNIQUE)</text></g><g class="entity" data-entity="GMN19" data-source-line="103" data-uid="ent0020" id="entity_GMN19"><path d="M396.65,624.2583 L396.65,778.3583 L361.53,782.3583 L396.65,786.3583 L396.65,940.4692 A0,0 0 0 0 396.65,940.4692 L700.6412,940.4692 A0,0 0 0 0 700.6412,940.4692 L700.6412,634.2583 L690.6412,624.2583 L396.65,624.2583 A0,0 0 0 0 396.65,624.2583" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M690.6412,624.2583 L690.6412,634.2583 L700.6412,634.2583 L690.6412,624.2583" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.5459" x="402.65" y="641.8266">State Machine:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.8359" x="402.65" y="657.1372">UNASSIGNED &#8594; ASSIGNED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.021" x="402.65" y="672.4477">ASSIGNED &#8594; LOCKED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.5977" x="402.65" y="687.7583">LOCKED &#8594; REDEEMED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.7251" x="402.65" y="703.0688">LOCKED &#8594; ASSIGNED (unlock)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="402.65" y="718.3794">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.3735" x="402.65" y="733.6899">Concurrency Control:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.4204" x="402.65" y="749.0005">- PostgreSQL advisory locks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.9663" x="402.65" y="764.311">- is_locked &amp; locked_until for visibility</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282.9912" x="402.65" y="779.6216">- No locked_by_user_id (uses advisory locks)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="402.65" y="794.9321">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.1582" x="402.65" y="810.2427">Multi-Redemption:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.4502" x="402.65" y="825.5532">- redemption_count tracks usage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.9478" x="402.65" y="840.8638">- max_redemptions per coupon</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="402.65" y="856.1743">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.1934" x="402.65" y="871.4848">Indexes:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.9448" x="402.65" y="886.7954">- code (PK)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.8262" x="402.65" y="902.1059">- book_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.6216" x="402.65" y="917.4165">- assigned_user_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.4087" x="402.65" y="932.727">- state</text></g><g class="entity" data-entity="GMN22" data-source-line="126" data-uid="ent0023" id="entity_GMN22"><path d="M478.18,373.3983 L478.18,420.3283 L444.15,424.3283 L478.18,428.3283 L478.18,475.2616 A0,0 0 0 0 478.18,475.2616 L677.1112,475.2616 A0,0 0 0 0 677.1112,475.2616 L677.1112,383.3983 L667.1112,373.3983 L478.18,373.3983 A0,0 0 0 0 478.18,373.3983" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M667.1112,373.3983 L667.1112,383.3983 L677.1112,383.3983 L667.1112,373.3983" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.7661" x="484.18" y="390.9666">Configuration per book:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.0142" x="484.18" y="406.2772">- Multi-redemption allowed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.9312" x="484.18" y="421.5877">- Max redemptions per user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.6265" x="484.18" y="436.8983">- Max assignments per user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.3452" x="484.18" y="452.2088">- Expiration date</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.2656" x="484.18" y="467.5194">- Active/inactive status</text></g><g class="entity" data-entity="GMN25" data-source-line="135" data-uid="ent0026" id="entity_GMN25"><path d="M921.83,350.4283 L921.83,420.3283 L887.67,424.3283 L921.83,428.3283 L921.83,498.2232 A0,0 0 0 0 921.83,498.2232 L1195.4731,498.2232 A0,0 0 0 0 1195.4731,498.2232 L1195.4731,360.4283 L1185.4731,350.4283 L921.83,350.4283 A0,0 0 0 0 921.83,350.4283" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1185.4731,350.4283 L1185.4731,360.4283 L1195.4731,360.4283 L1185.4731,350.4283" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.1128" x="927.83" y="367.9966">Bulk Distribution:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.019" x="927.83" y="383.3072">- Group users into pools</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221.3301" x="927.83" y="398.6177">- Distribute coupons to entire pool</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.6431" x="927.83" y="413.9283">- Track pool membership</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.4585" x="927.83" y="429.2388">- Creator relationship</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="927.83" y="444.5494">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.2598" x="927.83" y="459.8599">Used by:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246.1177" x="927.83" y="475.1705">- POST /api/v1/pools/{pool_id}/assign</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.6431" x="927.83" y="490.481">- Supports "equal" and "random" modes</text></g><g class="entity" data-entity="GMN28" data-source-line="147" data-uid="ent0029" id="entity_GMN28"><path d="M923.06,1055.3083 L923.06,1126.5505 A0,0 0 0 0 923.06,1126.5505 L1158.2426,1126.5505 A0,0 0 0 0 1158.2426,1126.5505 L1158.2426,1065.3083 L1148.2426,1055.3083 L1044.65,1055.3083 L1040.65,831.2683 L1036.65,1055.3083 L923.06,1055.3083 A0,0 0 0 0 923.06,1055.3083" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1148.2426,1055.3083 L1148.2426,1065.3083 L1158.2426,1065.3083 L1148.2426,1055.3083" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.0684" x="929.06" y="1072.8766">Many-to-Many Association:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.3657" x="929.06" y="1088.1872">- Links Users to UserPools</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.1826" x="929.06" y="1103.4977">- Tracks when user added to pool</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.2695" x="929.06" y="1118.8083">- Cascade delete on both sides</text></g><!--link Users to Books--><g class="link" data-entity-1="Users" data-entity-2="Books" data-source-line="81" data-uid="lnk8" id="link_Users_Books"><path codeLine="81" d="M595.5,205.2383 C553.15,234.2683 504.05,268.7583 460.65,301.3983 C455.15,305.5283 449.57,309.7883 443.96,314.1183" fill="none" id="Users-Books" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="519.5594,265.971,528.6199,263.08,525.1902,258.3065,519.5594,265.971" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.6968" x="532.62" y="267.9666">owns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.2202" x="579.5662" y="207.4664">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="451.8713" y="305.2579">0..*</text></g><!--link Books to Coupons--><g class="link" data-entity-1="Books" data-entity-2="Coupons" data-source-line="82" data-uid="lnk9" id="link_Books_Coupons"><path codeLine="82" d="M293.17,547.3583 C287.2,589.0283 280.58,635.2483 274.81,675.5383" fill="none" id="Books-Coupons" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="292.4911,590.863,296.6828,582.326,290.8643,581.4926,292.4911,590.863" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.2061" x="302.2" y="590.8266">contains</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.2202" x="283.8677" y="567.8903">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="253.1274" y="665.0793">0..*</text></g><!--link Users to Coupons--><g class="link" data-entity-1="Users" data-entity-2="Coupons" data-source-line="83" data-uid="lnk10" id="link_Users_Coupons"><path codeLine="83" d="M595.39,147.7483 C434.12,169.1483 136.05,219.0283 72.65,301.3983 C6,387.9883 36.52,444.1283 72.65,547.2583 C90.28,597.5783 123.77,645.1283 157.59,684.0683" fill="none" id="Users-Coupons" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="74.4882,428.3569,82.4847,423.2084,77.9313,419.4915,74.4882,428.3569" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.7505" x="86.65" y="429.3966">assigned to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.2202" x="579.786" y="145.7359">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="127.3132" y="673.879">0..*</text></g><!--link Coupons to RedemptionHistory--><g class="link" data-entity-1="Coupons" data-entity-2="RedemptionHistory" data-source-line="84" data-uid="lnk11" id="link_Coupons_RedemptionHistory"><path codeLine="84" d="M259.65,889.2983 C259.65,931.5283 259.65,979.0683 259.65,1017.2783" fill="none" id="Coupons-RedemptionHistory" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="264.65,984.1236,267.5889,975.0785,261.7111,975.0785,264.65,984.1236" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.3188" x="273.65" y="984.0366">logged in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.2202" x="251.4007" y="909.2078">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="236.553" y="1006.4936">0..*</text></g><!--link Users to UserPools--><g class="link" data-entity-1="Users" data-entity-2="UserPools" data-source-line="85" data-uid="lnk12" id="link_Users_UserPools"><path codeLine="85" d="M689.6,224.6983 C690.09,240.4983 692.11,256.6183 696.65,271.3983 C704.27,296.2283 717.48,320.6483 731.94,342.3983" fill="none" id="Users-UserPools" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="703.3425,267.7584,703.0462,258.2524,697.5153,260.2421,703.3425,267.7584" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.1318" x="710.65" y="267.9666">creates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.2202" x="680.4895" y="245.069">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="702.7168" y="331.7367">0..*</text></g><!--link UserPools to Users--><g class="link" data-entity-1="UserPools" data-entity-2="Users" data-source-line="86" data-uid="lnk13" id="link_UserPools_Users"><path codeLine="86" d="M785.18,342.2283 C779.03,313.9883 770.88,282.3883 760.65,254.3983 C757.06,244.5883 752.85,234.5483 748.35,224.6683" fill="none" id="UserPools-Users" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="768.7652,258.2822,768.6648,267.7923,774.2738,266.035,768.7652,258.2822" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.2061" x="779.26" y="267.9666">contains</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="760.9433" y="331.8306">0..*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="729.383" y="245.0366">0..*</text></g><!--link UserPools to pool_users--><g class="link" data-entity-1="UserPools" data-entity-2="pool_users" data-source-line="87" data-uid="lnk14" id="link_UserPools_pool_users"><path codeLine="87" d="M854.33,506.1183 C901.69,576.0783 968.61,674.9383 1008.03,733.1783" fill="none" id="UserPools-pool_users" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="920.7228,590.0541,918.0862,580.9163,913.2187,584.2112,920.7228,590.0541" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17.6655" x="926.92" y="590.8266">via</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.2202" x="850.8536" y="526.653">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="979.9464" y="722.7975">0..*</text></g><!--link Users to pool_users--><g class="link" data-entity-1="Users" data-entity-2="pool_users" data-source-line="88" data-uid="lnk15" id="link_Users_pool_users"><path codeLine="88" d="M803.72,215.6083 C809.65,218.8083 815.64,221.7683 821.65,224.3983 C983.93,295.3583 1100.16,164.5983 1212.65,301.3983 C1321.43,433.6983 1167.5,640.2083 1085.85,733.1683" fill="none" id="Users-pool_users" style="stroke:#181818;stroke-width:1;"/><polygon fill="#000000" points="1257.6031,428.8737,1255.8544,419.5252,1250.6935,422.3385,1257.6031,428.8737" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17.6655" x="1264.21" y="429.3966">via</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.2202" x="811.3268" y="218.3673">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.7119" x="1068.7099" y="722.7861">0..*</text></g><!--SRC=[jLPHZzeu47xdLqofT0UdKjfAzu8G4WlPBTs5tHAukpVa95wmIEpKTdQXLL_l1znFl5zoOpiX2HjEkah7hY2P6OzdlXb_urSHVMISmcfyTUTr3bq8Ow8K760uXCxgpUlhwp5-kZ0QjLxbfW-tncuOZ8RPw33iPwDXFoYrrqxBZ8gDMYsrPpmbaYGGa72_bIBZqKJ4GiBhQy_yLIpitcEj9GioJMUXu3xxIk5TgwMPZYbCH9OA3bT2xC6dyec557em9Pe4H57mmnrDIAlbSbahAbKNlhK0FnXpXkyR5dK7yDjuEVauNbf5hsT_E4beNO6UM7mIGMUzc7rUUrshsn6rez4cnMYVXOpg2wM8qPMtMCyx94eOVmDcPxUGgGq9DNj2Wwlx-pjllB3YK5AYqI7H0rZDvfw_6iyVh2PBemRDzo97WqGrnm3VN-Q89H7F_3zb7r4LIfPg9dXTSJbKUaYP96R5niHyhYPnB9utIHPhjf4qeadkl8f3GWuLdTga6BC1Rm2pnSgxyPOdAqIURNb2kRva5Og8OeMqfl8i1IqqYJTM7s8twlgwXXATu7RzLmNSU2anxVpwhbiWVh4KBdI4y5yRKccBOU7uG-wuHASfzZFyNYGMYt1FephcJhP1NwRTwpNxuRvSdeBuo9GMybY1RESaBlFrUZOjWAbZMKYRKRe8S0wVGO4cZQ5N84oe9fW76S0d_tvnLSPlkED1YBXQwXJV6mCfK0gEFtIwLjuVg_-576p0sHaBNfU9d4Nhb0NSpQcGA6hQxsTOqjWUVRLZgMfPweNs-pQkW_Qxjsz_QLlILZ00P285evPxhPlanmkDaFarOTQmoLTfM1mcFDHeMyZhrY-Q4TV5Ohl5LOnVsE7K02OOMu0Y5YVDpUeB6YBFhMk-oxgW_HCZ5q9eC6jneIb8jjrf48zkJwpBEDCxP48MsXB0JrOW9FjgtmTeqOE7V5QfV7Z1CzCx249vJBKr-FJx2a7SKzupipG2WZwiOedph9258SNBGMSydSyM_RNlBRlMn3Ep4ZBElcIK6mlA7uKCQOHQ_9_nY1weSe7a3GQTXrkts0xQShvI7e59yppPlBQun3VK27CIxl2-OPok5sFVdzqil2dy_UTVKBmOPAhok_l9hPMw1ojRUbFFcvzBJyiw6JVys7LvJ0GFCoaf3u_cMUEapy4LIcybzJ_VuGbvOihqc5cdhFP4l5YPAji2OeI5LInWCTD7QxiGXKbmt9oWmWTrvZaFQMxcQQ_iS1VF-PG0BV7kfH1xigNMucnI0CvGR5s3S4F9336NzSfvrpwVpp8hjAFhOXtjmNTWFh9jvcuCTd_Zs6teiYhZSvS7wjpFoG7EGpVRdvILkq5TwPrkA628qyh6bd7xZ3lgjS5dwcBqfpEDYw-oU0zJf1HxNJs1VuDNt1JSmMKSUIdDxNkbCSt1LeQtpD6Lr9fPgvKfbds5X2O1-a5IjPg9OI9i6bbXMrUljJcUmJ5lntj_1NsIilxJ-xxTlVyj9_tlVOUEjVEpD1KIKMhJBnc9sq0mwxR4Rv6q8S6glm0Y45gBn21HqfDfGyAFFIrwvXV6IecGLRZdZd5iFiTnc6yLmpnR1S_8O1OqDsCWnysbJLH8i0KZ6bEC0Sk7OUn0iLg0_m00]--></g></svg>